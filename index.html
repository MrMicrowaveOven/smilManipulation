<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Sample XML</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <label>XML View
      <div class="XMLSpace">
        &lt;smil&gt;<br>
          &emsp;&lt;head&gt;<br>
          &emsp;&lt;/head&gt;<br>
          &emsp;&lt;body&gt;<br><br>
            <div class="streams" id="streams">
            </div>
            <br>
            <div class="playlists" id="playlists">
            </div>
          &emsp;&lt;/body&gt;
          <br>&lt;/smil&gt;
      </div>
    </label>
    <label>User View
      <div class="userView">
        <label>Streams:
          <div class="streamsView" id="streamsView">

          </div>
        </label><br>
        <label>Playlists:
          <div class="playlistsView" id="playlistsView">

          </div>
        </label>

      </div>
    </label>
    <label>Control Panel
      <div class="controlPanel">
        <div class="addStream">
          <label><strong>Add Stream</strong><br>
            <label>Stream Name: <input type="text" id="streamName" name="streamName" value=""></label><br>
            <button type="Add" name="button" onClick="AddStream()">Add Stream</button><br>
          </label>
        </div>

        <div class="addPlaylist">
          <label><strong>Add Playlist</strong><br>
            <label>Playlist Name: <input type="text" id="playlistName" name="playlistName" value=""></label><br>
            <label>Stream to play on: <select id="playlistStream" name="playlistStream" value="Streams"><select></label><br>
            <label>Repeat?<input type="checkbox" name="repeat" id="repeat" value=""></label><br>
            <label>Time to play stream: <input type="datetime-local" name="dateTime" id="dateTime" value=""></label><br>
            <button type="Add" name="button" onClick="AddPlaylist()">Add Playlist</button>
          </label>
        </div>

        <div class="addVideo">
          <label><strong>Add Video</strong><br>
            <label>Playlist: <select name="vidPlaylist" id="vidPlaylist" value=""></select></label><br>
            <label>Source: <input type="text" name="source" id="source" value=""></label><br>
            <label>Start Time: <input type="text" name="start" id="start" value=""></label><br>
            <label>Length to Play: <input type="text" name="length" id="length" value=""></label><br>
            <button type="Add" name="button" onClick="AddVideo()">Add Video</button>
          </label>
        </div>
      </div>
    </label>

    <script type="text/javascript">
      window.streams = [];
      window.playlists = [];
      window.videos = [];

      function AddStream() {
        //Collect data
        var streamName = document.getElementById("streamName").value;

        //Make XML object and add it to body
        var streamXML = '<stream name="' + streamName + '"></stream>';
        var stream = document.createTextNode(streamXML);
        document.getElementById("streams").appendChild(stream);
        document.getElementById("streams").appendChild(document.createElement("br"));

        //Saves to global array
        window.streams.push(streamName);

        //Adds stream to playlist dropdown menu
        var option = document.createElement("option");
        option.setAttribute("value", streamName);
        option.innerHTML = streamName;
        document.getElementById("playlistStream").appendChild(option);

        //Add stream to userView as a div
        var streamView = document.createElement("div");
        streamView.setAttribute("class", "streamView")
        streamView.innerHTML = streamName;
        document.getElementById("streamsView").appendChild(streamView);
      }

      function AddPlaylist() {
        //Collect data
        var playlistName = document.getElementById("playlistName").value;
        var playlistStream = document.getElementById("playlistStream").value;
        var repeat = document.getElementById("repeat").checked;
        var timeToPlay = document.getElementById("dateTime").value;

        //Make XML object
        var playlistXML = '<playlist name="' + playlistName
                        + '" playOnStream="' + playlistStream
                        + '" repeat="' + repeat
                        + '" scheduled="' + dateTime + '">'
        var playlist = document.createTextNode(playlistXML);

        //Put XML object into a div with id equal to playlistName
        var playlistDiv = document.createElement("div");
        playlistDiv.setAttribute("id", playlistName);
        document.getElementById("playlists").appendChild(playlistDiv);
        playlistDiv.appendChild(playlist);
        playlistDiv.appendChild(document.createElement("br"));

        //Add a div for videos in the playlist
        var vidsDiv = document.createElement("div");
        vidsDiv.setAttribute("id", playlistName + "Vids");
        vidsDiv.setAttribute("class", "videos");
        playlistDiv.appendChild(vidsDiv);

        //Close the playlist node
        var playlistClose = document.createTextNode("</playlist>");
        playlistDiv.appendChild(playlistClose);
        playlistDiv.appendChild(document.createElement("br"));
        playlistDiv.appendChild(document.createElement("br"));

        //Add playlist to video dropdown menu
        var option = document.createElement("option");
        option.setAttribute("value", playlistName);
        option.innerHTML = playlistName;
        document.getElementById("vidPlaylist").appendChild(option);

        //Add playlist to global array
        window.playlists.push(playlistName);

        //Add playlist to userView as a div
        var playlistView = document.createElement("div");
        playlistView.setAttribute("id", playlistName + "View");
        playlistView.setAttribute("class", "playlistView");
        playlistView.innerHTML = playlistName;
        playlistView.appendChild(document.createElement("br"));
        document.getElementById("playlistsView").appendChild(playlistView);
      }

      function AddVideo() {
        //Collect data
        var vidPlaylist = document.getElementById("vidPlaylist").value;
        var source = document.getElementById("source").value;
        var start = document.getElementById("start").value;
        var length = document.getElementById("length").value;
        var playlistDiv = document.getElementById(vidPlaylist + "Vids");

        //Make XML node and add to playlistDiv
        var vidXML = '<video src="' + source
                    + '" start="' + start
                    + '" length="' + length + '">'
        playlist = document.createTextNode(vidXML);
        playlistDiv.appendChild(playlist);

        //Add video close to HTML node
        var videoClose = document.createTextNode("</video>");
        playlistDiv.appendChild(videoClose);
        playlistDiv.appendChild(document.createElement("br"));

        //Add video to corresponding playlist in userView
        var playlistView = document.getElementById(vidPlaylist + "View");
        var videoView = document.createElement("div");
        videoView.innerHTML = source;
        videoView.setAttribute("class", "videoView");
        playlistView.appendChild(videoView);
      }
    </script>
  </body>
</html>
